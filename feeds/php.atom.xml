<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Florent Lebreton @ /home/fle</title><link href="http://blog.fle.org/" rel="alternate"></link><link href="http://blog.fle.org/feeds/php.atom.xml" rel="self"></link><id>http://blog.fle.org/</id><updated>2011-11-18T00:00:00+01:00</updated><entry><title>De retour de Drupagora 2011</title><link href="http://blog.fle.org/de-retour-de-drupagora-2011.html" rel="alternate"></link><updated>2011-11-18T00:00:00+01:00</updated><author><name>Florent Lebreton (fle)</name></author><id>tag:blog.fle.org,2011-11-18:de-retour-de-drupagora-2011.html</id><summary type="html">&lt;p&gt;Je reviens de la première édition de Drupagora, à Paris, qui se veut plus oriéntée chefs de projet/décideurs que les habituels DrupalCamps de geeks.
Au final, une formule plutôt satisfaisante : Conférences intéressantes, beaucoup de retours d'expérience et un peu de technique quand même (ouf !).&lt;/p&gt;
&lt;div class="section" id="mobilize-don-t-miniaturize"&gt;
&lt;h2&gt;Mobilize, don't miniaturize&lt;/h2&gt;
&lt;div class="section" id="un-premier-constat-de-base"&gt;
&lt;h3&gt;Un premier constat de base&lt;/h3&gt;
&lt;p&gt;Le mobinaute :
* est boulimique d'information, très rapide, très volatile
* navigue avec une connexion lente et instable
* navigue sur un device peu performant&lt;/p&gt;
&lt;p&gt;Il faut donc faire : léger, simple, concis, fontionnel&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="la-mauvaise-idee-a-la-mode-une-seule-url-media-queries"&gt;
&lt;h3&gt;1. La mauvaise idée à la mode : une seule URL + Media Queries&lt;/h3&gt;
&lt;p&gt;Le responsive design n'est pas la panacée. L'idée est tentante, mais MediaQueries fait seulement de la réorganisation d'affichage, ce qui ne règle pas les problèmes d'ergonomie et de performances :
* le volume de données transféré est trop gros : DOM (surtout avec Drupal), images, js, css
* la consommation CPU est trop importante : scripts js et animations
* le contenu est trop long : articles trop longs, trop de blocs, ...&lt;/p&gt;
&lt;p&gt;=&amp;gt; Cette solution est donc à réserver pour un site simple et léger (évenementiel par exemple)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="une-solution-plus-aboutie-2-url-2-themes"&gt;
&lt;h3&gt;2. Une solution plus aboutie : 2 URL + 2 themes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;(MobileTools + Domains + DomainThemes + DomainAccess + DomainViews + Panels, TinySrc)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Une URL de base pour le site sur ordinateur (rien de particulier à ce niveau)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Une URL pour device mobile. Quelques recommandations pour le version mobile :&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Une des idées importantes est de profiter de la modernité des navigateurs mobiles (CSS3, HTML5, Storage) !!!&lt;/p&gt;
&lt;p&gt;Au niveau du thème&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;surcharger les .tpl pour alléger le DOM (DomainThemes)&lt;/li&gt;
&lt;li&gt;penser au responsive design pour les différents devices (OmegaTheme ou AdaptiveTheme + PanelEverywhere + TinySrc)&lt;/li&gt;
&lt;li&gt;éviter au maximum le javascript et la manipulation du DOM (consommation CPU importante) =&amp;gt; Penser au CSS3, notamment à Translate3D (qui utilise le GPU et donc soulage le CPU).&lt;/li&gt;
&lt;li&gt;pour les formulaires, l'audio, la vidéo, éviter là encore la javascript / Flash =&amp;gt; Penser au HTML5&lt;/li&gt;
&lt;li&gt;pour le js réellement nécessaire, se limiter à DOM Selector API ou jQuery Mobile&lt;/li&gt;
&lt;li&gt;pour les sessions et le cache, éviter l'utilisation de cookies (transfert de data) =&amp;gt;  Penser au Session storage, Local storage, DB storage&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;Au niveau du contenu&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;offrir la possibilité de publier une version résumée des articles (DomainAccess)&lt;/li&gt;
&lt;li&gt;offrir la possibilité de publier une partie d'une page composite (variantes de Panel, Context, ...)&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;=&amp;gt; On a une version du site réellement adaptée au mobile avec :&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Un contenu allégé, adapté au mode de lecture du mobinaute&lt;/li&gt;
&lt;li&gt;Peu de HTML&lt;/li&gt;
&lt;li&gt;Pas de JS&lt;/li&gt;
&lt;li&gt;Beaucoup de cache navigateur&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;La gestion des 2 URLS nécessite:&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Plan de redirection : il doit être implémenter au plus tôt dans l'architecture  (load-balancer -&amp;gt; proxy-cache -&amp;gt; apache -&amp;gt; Drupal si pas possible de faire autrement)&lt;/li&gt;
&lt;li&gt;Détection de browser : Device detection =&amp;gt; WURFL (plus OpenSource) vs. Browser detection =&amp;gt; BrowserCap&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Attention à bien mettre en cache la redirection dans les headers HTTP pour ne pas la recalculer à chaque fois !&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Exemple d'implémentation complète par Adyax : societegenerale.com&lt;/p&gt;
&lt;p&gt;Les slides : &lt;a class="reference external" href="http://www.drupagora.com/sites/default/files/slide/Drupal_et_Mobilite.pdf"&gt;http://www.drupagora.com/sites/default/files/slide/Drupal_et_Mobilite.pdf&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="reussir-son-referencement-et-profiter-de-drupal"&gt;
&lt;h2&gt;Réussir son référencement et profiter de Drupal&lt;/h2&gt;
&lt;div class="section" id="quelques-trucs-google-auxquels-on-ne-pensent-pas-forcement"&gt;
&lt;h3&gt;Quelques trucs Google auxquels on ne pensent pas forcément&lt;/h3&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&amp;quot;Être en 1ère page de Google n'a plus vraiment de sens&amp;quot; : Penser à se référencer sur &amp;quot;tous&amp;quot; les sites google : maps, youtube, shooping, ... selon le type de site&lt;/li&gt;
&lt;li&gt;Il est très largement préférable se positionner sur une multitude d'expressions qualifiées de 4/5/6 mots (longue traine), les expressions génériques sont inutiles&lt;/li&gt;
&lt;li&gt;Quand on fait des tests de référencement, attention à la personnalisation des résultats qui peut être trompeuse (cookies, géoloc, sites visités régulièrement, ...)&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="evolutions-des-algorithmes-google-en-2010-11-12"&gt;
&lt;h3&gt;Évolutions des algorithmes Google en 2010-11-12-...&lt;/h3&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Google Panda =&amp;gt; Les pages à forte valeur ajoutée ont beaucoup plus d'importance que les aggrégateurs (news, comparateurs de prix, ...)&lt;/li&gt;
&lt;li&gt;Vers plus de &amp;quot;social ranking&amp;quot; =&amp;gt; Facebook like, Google +1&lt;/li&gt;
&lt;li&gt;Arrivée du &amp;quot;person ranking&amp;quot; =&amp;gt; La popularité de l'auteur de la page (Twitter, Facebook, Blog) va avoir une importance dans le positionnement de la page dans les prochains mois&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="la-regle-des-80-20-pour-le-referencement-d-un-site-drupal"&gt;
&lt;h3&gt;La règle des 80/20 pour le référencement d'un site Drupal&lt;/h3&gt;
&lt;p&gt;Avec Drupal, 80% de l'optimisation du référencement d'un site =  5 optimisations:&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Un bon title avec les bons mots-clés (en restant naturel : accents, majuscules, ...)&lt;/li&gt;
&lt;li&gt;Une bonne URL (sans paramètre, avec les bons mots-clés)&lt;/li&gt;
&lt;li&gt;Une bonne meta description pour attirer le clic (accroche du type &amp;quot;Livraison gratuite&amp;quot;)&lt;/li&gt;
&lt;li&gt;Une bonne structure de site&lt;/li&gt;
&lt;li&gt;Une bonne structure sémantique HTML (h*, ul/li)&lt;/li&gt;
&lt;li&gt;(bonus) Avoir un title + H1 + URL indépendants les uns des autres !&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;Les autres 20% :&lt;/p&gt;
&lt;blockquote&gt;
Fil d'Ariane, taux de rebond (!!!), balises alternatives des images/vidéos, micro-formats, ...&lt;/blockquote&gt;
&lt;/div&gt;
&lt;div class="section" id="quelques-modules-drupal"&gt;
&lt;h3&gt;Quelques modules Drupal&lt;/h3&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;URLs : PathAuto, PathAlias, PathRedirect, GlobalRedirect, Token&lt;/li&gt;
&lt;li&gt;Title : PageTitle, Taxonomy/Title&lt;/li&gt;
&lt;li&gt;Metas : Nodewords&lt;/li&gt;
&lt;li&gt;Sitemap : SitemapXML&lt;/li&gt;
&lt;li&gt;Linking interne : CKELink&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Les slides : &lt;a class="reference external" href="http://www.drupagora.com/sites/default/files/slide/presentation-Sebastien-Monnier-Woptimo-drupagora%20-%20V2.pptx"&gt;http://www.drupagora.com/sites/default/files/slide/presentation-Sebastien-Monnier-Woptimo-drupagora%20-%20V2.pptx&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="gestion-unifiee-des-medias-chez-radio-france"&gt;
&lt;h2&gt;Gestion unifiée des medias chez Radio France&lt;/h2&gt;
&lt;p&gt;RadioFrance est confronté au problème classique de la gestion des medias (sous D6 pour le moment) sur plusieurs sites. Leurs contraintes sont les suivantes :&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Tout type de médias (photo, audio, video, flux externe, objets personnalisés)&lt;/li&gt;
&lt;li&gt;Gestion de différents droits, licences, copyrights, expiration selon le media, la source, ...&lt;/li&gt;
&lt;li&gt;Différents render de chaque media selon le context d'affichage (dans un wysiwyg ou non, sur device mobile, ...)&lt;/li&gt;
&lt;li&gt;~ 1.000.000 de nodes&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;L'implémentation technique est basée sur le module &lt;a class="reference external" href="http://drupal.org/project/scald"&gt;Scald&lt;/a&gt;, initialement développé &amp;amp; utilisé par la radio publique de Chicago :&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;gère n'importe quel media&lt;/li&gt;
&lt;li&gt;a son propre type de stockage unifiant (atoms) pour pallier à l'absence d'Entity sur D6&lt;/li&gt;
&lt;li&gt;a sa propre gestion de cache&lt;/li&gt;
&lt;li&gt;possède une gestion de &amp;quot;providers&amp;quot; pour pouvoir gérer des types de contenus media personnalisés !&lt;/li&gt;
&lt;li&gt;D6 seulement, mais le portage D7 est prévu pour Q1 2012&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;La solution construite par RadioFrance consiste en une bibliothèque partagée qui liste tous les medias disponibles au contributeur (Scald + Views + Lightbox):&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;visible et accessible en permanence dans un bandeau droit vertical,&lt;/li&gt;
&lt;li&gt;filtres ajax (titre, type de media, tags, licences, ...) + enregistrement de recherches personnalisées,&lt;/li&gt;
&lt;li&gt;prévisualisation de n'importe quel media en lightbox&lt;/li&gt;
&lt;li&gt;ajout d'un nouveau media lightbox (sans quitter le node en cours de création donc !)&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;L'intégration d'un media dans un contenu se fait par un simple Drag &amp;amp; Drop :&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;soit directement dans un WYSIWYG, avec le rendu final automatique. Exemple :&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;pour une photo : affichage de l'image + légende + copyright,&lt;/li&gt;
&lt;li&gt;pour un audio ou une video : affichage du player thémé.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;soit dans un fieldset du formulaire (stockage dans un field caché)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;Ergonomiquement pour le contributeur ... c'est très sympa !&lt;/p&gt;
&lt;p&gt;Pour le passage à D7, RadioFrance hésite entre Scald et Media :&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Entity rend redondante la couche d'abstraction créée par Scald avec Atom&lt;/li&gt;
&lt;li&gt;Pour le moment, l'interface et les fonctionnalités de Media sont plus basiques que Scald (integration Views inexistante ou très récente, gestion pauvre des licences/expiration, ...), mais il y a bien sûr la possibilité d'ajouter des plugins&lt;/li&gt;
&lt;li&gt;Le développement de Media avance vite, et rattrape petit à petit Scald&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;=&amp;gt; Selon RadioFrance, impossible d'être influent sur l'orientation de Media face à Acquia, donc RadioFrance va choisir d'aider au portage de Scald sur D7 plutôt que de contribuer à Media ...&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;A tester aussi : le module &lt;a class="reference external" href="http://drupal.org/project/mediafront"&gt;MediaFront&lt;/a&gt; basé sur Media.&lt;/p&gt;
&lt;/div&gt;
</summary><category term="drupal"></category></entry><entry><title>My short drush cheat sheet</title><link href="http://blog.fle.org/my-short-drush-cheat-sheet.html" rel="alternate"></link><updated>2011-01-31T00:00:00+01:00</updated><author><name>Florent Lebreton (fle)</name></author><id>tag:blog.fle.org,2011-01-31:my-short-drush-cheat-sheet.html</id><summary type="html">&lt;p&gt;Drush (DRUpal SHell) is a command-line which allows you to administer your Drupal site in console.&lt;/p&gt;
&lt;p&gt;It can be very useful when you have broken your site and when you can't access to your administration interface.&lt;/p&gt;
&lt;p&gt;Drush command format:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="gp"&gt;$&lt;/span&gt; drush &lt;span class="o"&gt;[&lt;/span&gt;options&lt;span class="o"&gt;]&lt;/span&gt; &amp;lt;&lt;span class="nb"&gt;command&lt;/span&gt;&amp;gt; &lt;span class="o"&gt;[&lt;/span&gt;argument&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Below, a few basic commands offered by drush :&lt;/p&gt;
&lt;p&gt;List all commands and get help:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="gp"&gt;$&lt;/span&gt; drush
&lt;span class="gp"&gt;$&lt;/span&gt; drush &lt;span class="nb"&gt;help&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Install Drupal ! (Very useful to deploy a dev instance quickly):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="go"&gt;-- Download latest Drupal ...&lt;/span&gt;
&lt;span class="gp"&gt;$&lt;/span&gt; drush dl drupal
&lt;span class="go"&gt;-- or select a version ...&lt;/span&gt;
&lt;span class="gp"&gt;$&lt;/span&gt; drush dl drupal --select
&lt;span class="go"&gt;-- and install it !&lt;/span&gt;
&lt;span class="gp"&gt;$&lt;/span&gt; drush si --account-name&lt;span class="o"&gt;=&lt;/span&gt;&amp;lt;USER&amp;gt; --account-pass&lt;span class="o"&gt;=&lt;/span&gt;&amp;lt;PASS&amp;gt; --db-url&lt;span class="o"&gt;=&lt;/span&gt;mysql://&amp;lt;DB_USER&amp;gt;:&amp;lt;DB_PASS&amp;gt;@localhost/&amp;lt;DB_NAME&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Clear Drupal caches (used 87 times today):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="gp"&gt;$&lt;/span&gt; drush cc all
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Install one or more module(s):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="gp"&gt;$&lt;/span&gt; drush dl -y &amp;lt;MODULE&amp;gt; &lt;span class="o"&gt;[&lt;/span&gt;&amp;lt;MODULE2&amp;gt;, ...&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="gp"&gt;$&lt;/span&gt; drush en -y &amp;lt;MODULE&amp;gt; &lt;span class="o"&gt;[&lt;/span&gt;&amp;lt;MODULE2&amp;gt;, ...&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Disable and uninstall module(s):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="gp"&gt;$&lt;/span&gt; drush dis -y &amp;lt;MODULE&amp;gt; &lt;span class="o"&gt;[&lt;/span&gt;&amp;lt;MODULE2&amp;gt;, ...&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="gp"&gt;$&lt;/span&gt; drush pm-uninstall -y &amp;lt;MODULE&amp;gt; &lt;span class="o"&gt;[&lt;/span&gt;&amp;lt;MODULE2&amp;gt;, ...&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Export database (intelligently, i.e. without cache tables and other stuff):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="gp"&gt;$&lt;/span&gt; drush sql-dump --result-file&lt;span class="o"&gt;=&lt;/span&gt;&amp;lt;DUMP_FILE.sql&amp;gt; --gzip
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Launch Drupal cron:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="gp"&gt;$&lt;/span&gt; drush cron
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Update your Drupal site:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="gp"&gt;$&lt;/span&gt; drush up
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Of course, it's a very short list of basic drush commands, this post is just my drush newbie notes taken during &lt;a class="reference external" href="http://twitter.com/juliendubreuil"&gt;JulienD&lt;/a&gt; presentation at #DCNantes. There is many other commands with drush core, some modules can extend this list and you can implement your own drush commands.&lt;/p&gt;
&lt;p&gt;With some configuration, you can administer two sites or more easily.&lt;/p&gt;
</summary><category term="drush"></category></entry></feed>